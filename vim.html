<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Vim (neovim) configuration &#8212; dotfiles  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="_static/plugin_metadata.css?v=114a3185" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Nvim plugins" href="nvim-plugins.html" />
    <link rel="prev" title="Bash dotfiles" href="bash.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="bash.html" title="Previous document">Bash dotfiles</a>
        </li>
        <li>
          <a href="nvim-plugins.html" title="Next document">Nvim plugins</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="vim-neovim-configuration">
<span id="vim"></span><h1>Vim (neovim) configuration<a class="headerlink" href="#vim-neovim-configuration" title="Link to this heading">¶</a></h1>
<p>See <a class="reference internal" href="why.html#why"><span class="std std-ref">Why?</span></a> for why nvim (short for <a class="reference external" href="https://neovim.io/">Neovim</a>)
instead of vim.</p>
<p>The nvim community moves quickly, and this config and these accompanying docs
change more often than any other configs in this repo.</p>
<p><strong>You can take these new changes for a test drive</strong> by running</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./setup.sh<span class="w"> </span>--nvim-test-drive
</pre></div>
</div>
<p>This will move existing nvim config and plugins to backup directories. This
does not affect any other config (like bash). You can always roll back to what
you had before. The commands to roll back are printed at the end of the
command.</p>
<section id="config-file-location">
<h2>Config file location<a class="headerlink" href="#config-file-location" title="Link to this heading">¶</a></h2>
<p>The nvim configuration is split over multiple files.</p>
<p>This makes it easier to see what changed, and decide if you want those changes
or not. It also enables us to import the config files into this documentation
to easily view them (look for the “<strong>Config:</strong>” dropdowns).</p>
<p>This is just a starting point, <strong>you should adjust the config to
your liking!</strong></p>
<p>Here is a description of the different pieces of the nvim config. Paths are
relative to <code class="file docutils literal notranslate"><span class="pre">~/.config/nvim</span></code>:</p>
<details><summary>init.lua</summary><div class="details"><p>The file <code class="file docutils literal notranslate"><span class="pre">.config/nvim/init.lua</span></code> is the entry point of the nvim config.
This in turn loads files in the <code class="file docutils literal notranslate"><span class="pre">lua</span></code> subdirectory. For example, the
syntax <code class="docutils literal notranslate"><span class="pre">require(&quot;config.lazy&quot;)</span></code> will load
<code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/config/lazy.lua</span></code>.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Lua config for neovim. Coming from Vim lanuage? See</span>
<span class="c1">-- https://neovim.io/doc/user/lua.html for the basics.</span>

<span class="c1">-- leader must be set before plugins are set up.</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;let mapleader=&#39;,&#39;&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- Re-map leader from default \ to , (comma)</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;let maplocalleader = &#39;</span><span class="se">\\</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- Local leader becomes \.</span>

<span class="c1">-- This allows nvim-tree to be used when opening a directory in nvim.</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">g</span><span class="p">.</span><span class="py">loaded_netrw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">g</span><span class="p">.</span><span class="py">loaded_netrwPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;set termguicolors&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- use full color in colorschemes</span>

<span class="nb">require</span><span class="p">(</span><span class="s2">&quot;config.lazy&quot;</span><span class="p">)</span>
<span class="nb">require</span><span class="p">(</span><span class="s2">&quot;config.options&quot;</span><span class="p">)</span>

<span class="c1">-- Colorscheme.</span>
<span class="c1">-- Add your favorite colorscheme to lua/plugins/colorscheme.lua (which will be</span>
<span class="c1">-- loaded with `config.lazy` above), and then use it here.</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;colorscheme zenburn&quot;</span><span class="p">)</span>

<span class="c1">-- Uncomment these lines if you use a terminal that does not support true color:</span>
<span class="c1">-- vim.cmd(&quot;colorscheme onedark&quot;)</span>
<span class="c1">-- vim.cmd(&quot;set notermguicolors&quot;)</span>

<span class="nb">require</span><span class="p">(</span><span class="s2">&quot;config.keymaps&quot;</span><span class="p">)</span>
<span class="nb">require</span><span class="p">(</span><span class="s2">&quot;config.autocmds&quot;</span><span class="p">)</span>

<span class="c1">-- vim: nowrap</span>
</pre></div>
</div>
</div></details><details><summary>lua/config/lazy.lua</summary><div class="details"><p><code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/config/lazy.lua</span></code> loads the <a class="reference external" href="https://github.com/folke/lazy.nvim">lazy.nvim</a> plugin manager. The plugins in the
<code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/plugins</span></code> directory are loaded here.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Bootstrap lazy.nvim</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">lazypath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">fn</span><span class="p">.</span><span class="nf">stdpath</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;/lazy/lazy.nvim&quot;</span>
<span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="p">(</span><span class="nv">vim</span><span class="p">.</span><span class="py">uv</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">loop</span><span class="p">).</span><span class="nf">fs_stat</span><span class="p">(</span><span class="nv">lazypath</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">lazyrepo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/folke/lazy.nvim.git&quot;</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">fn</span><span class="p">.</span><span class="nf">system</span><span class="p">({</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;clone&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--filter=blob:none&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--branch=stable&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">lazyrepo</span><span class="p">,</span><span class="w"> </span><span class="nv">lazypath</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">v</span><span class="p">.</span><span class="py">shell_error</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_echo</span><span class="p">({</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;Failed to clone lazy.nvim:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ErrorMsg&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">out</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;WarningMsg&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Press any key to exit...&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="p">{})</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">fn</span><span class="p">.</span><span class="nf">getchar</span><span class="p">()</span>
<span class="w">    </span><span class="nb">os.exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="kr">end</span>
<span class="kr">end</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">rtp</span><span class="p">:</span><span class="nf">prepend</span><span class="p">(</span><span class="nv">lazypath</span><span class="p">)</span>

<span class="nb">require</span><span class="p">(</span><span class="s2">&quot;lazy&quot;</span><span class="p">).</span><span class="nf">setup</span><span class="p">({</span>
<span class="w">  </span><span class="nv">spec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">-- imports all *.lua files in the plugins/ directory</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nv">import</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;plugins&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nv">checker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">},</span>
<span class="p">})</span>
</pre></div>
</div>
</div></details><details><summary>lua/config/options.lua</summary><div class="details"><p><code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/config/options.lua</span></code> sets global options.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Global options.</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;on&quot;</span><span class="w"> </span><span class="c1">-- Syntax highlighting; also does an implicit filetype on</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">foldenable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">-- Files will open with everything unfolded</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">backspace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;indent,eol,start&quot;</span><span class="w"> </span><span class="c1">-- Make backspace work as expected in some situations</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">smarttab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- Insert spaces according to shiftwidth at the beginning of each line</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">expandtab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- &lt;Tab&gt; inserts spaces, not &quot;\t&quot;</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">scrolloff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1">-- Keep some lines above and below cursor to keep it visible</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- Show non-printing characters</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">showmatch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- Show matching parentheses</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">nu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- Show line numbers</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">showmode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">-- The lualine plugin provides modeline for us</span>

<span class="c1">-- In addition to allowing clicking and scrolling, vim.opt.mouse = &quot;a&quot; also:</span>
<span class="c1">--  * Supports mouse-enabled motions. To try this, left-click to place the</span>
<span class="c1">--    cursor. Type y then left-click to yank from current cursor to where you</span>
<span class="c1">--    next clicked.</span>
<span class="c1">--  * Drag the status-line or vertical separator to resize</span>
<span class="c1">--  * Double-click to select word; triple-click for line</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">mouse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;a&quot;</span>

<span class="c1">-- Change the behavior of various formatting.</span>
<span class="c1">-- Explanation of these options; see :h formatoptions for more info.</span>
<span class="c1">--   q: gq also formats comments</span>
<span class="c1">--   r: insert comment leader after &lt;Enter&gt; in insert mode</span>
<span class="c1">--   n: recognize numbered lists</span>
<span class="c1">--   1: don’t break a line after a 1-letter word</span>
<span class="c1">--   c: autoformat comments</span>
<span class="c1">--   o: automatically insert comment leader afer ‘o’ or ‘O’ in Normal mode.</span>
<span class="c1">--   j: where it makes sense, remove a comment leader when joining lines</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">formatoptions</span><span class="o">=</span><span class="s2">&quot;qrn1coj&quot;</span>

<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">hidden</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- Open a new buffer without having to save first</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">swapfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">-- Disable swap file creation. Keep enabled for huge files (:set swapfile)</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">ignorecase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- Ignore case when searching...</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">smartcase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- ...unless at least one character is uppercase</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">hlsearch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">-- Don&#39;t highlight search items by default</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">wildmenu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- Make tab completion for files/buffers act like bash</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">wildmode</span><span class="o">=</span><span class="s2">&quot;list:full&quot;</span><span class="w"> </span><span class="c1">-- Show a list when pressing tab; complete first full match</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">wildignore</span><span class="p">:</span><span class="nf">append</span><span class="p">(</span><span class="s2">&quot;*.swp,*.bak,*.pyc,*.class&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- Ignore these when autocompleting</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">cursorline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">  </span><span class="c1">-- Highlight line where the cursor is</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">fillchars</span><span class="p">:</span><span class="py">append</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">diff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;·&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">-- in diffs, show deleted lines with dots rather than dashes</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">signcolumn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="w"> </span><span class="c1">-- always show the signcolumn to minimize distraction of appearing and disappearing</span>

<span class="c1">-- vim.cmd(&quot;:autocmd InsertEnter * set nocul&quot;) -- Remove color when entering insert mode</span>
<span class="c1">-- vim.cmd(&quot;:autocmd InsertLeave * set cul&quot;) -- Turn color back on when exiting insert mode</span>
<span class="c1">-- vim.cmd(&quot;set guicursor=i:block&quot;) -- Always use block cursor. In some terminals and fonts (like iTerm), it can be hard to see the cursor when it changes to a line.</span>

<span class="c1">-- Copy all yanked/deleted lines to the &quot;+&quot; buffer. Useful when you want to use</span>
<span class="c1">-- the OS clipboard.</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;set clipboard=unnamedplus&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></details><details><summary>lua/config/autocmds.lua</summary><div class="details"><p><code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/config/autocmds.lua</span></code> configures autocommands –
settings that are specific to a filetype or that should be triggered on
certain events.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Autocommands.</span>

<span class="c1">-- Display nonprinting characters (tab characters and trailing spaces).</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;:autocmd InsertEnter * set listchars=tab:&gt;•&quot;</span><span class="p">)</span>

<span class="c1">-- Also show trailing spaces after exiting insert mode</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;:autocmd InsertLeave * set listchars=tab:&gt;•,trail:∙,nbsp:•,extends:⟩,precedes:⟨&quot;</span><span class="p">)</span>

<span class="c1">-- Set the working directory to that of the opened file</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;autocmd BufEnter * silent! lcd %:p:h&quot;</span><span class="p">)</span><span class="w"> </span>

<span class="c1">-- &lt;leader&gt;d inserts a header for today&#39;s date. Different commands depending on</span>
<span class="c1">-- the format of the filetype (ReStructured Text or Markdown)</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_create_autocmd</span><span class="p">(</span><span class="s2">&quot;Filetype&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;rst&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;i&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="s2">&quot;&lt;leader&gt;d&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;&lt;Esc&gt;:r! date &quot;+</span><span class="se">\\</span><span class="s1">%Y-</span><span class="se">\\</span><span class="s1">%m-</span><span class="se">\\</span><span class="s1">%d&quot;&lt;CR&gt;A&lt;CR&gt;----------&lt;CR&gt;&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Insert date as section title&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span>
<span class="w">      </span><span class="s2">&quot;n&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;&lt;leader&gt;p&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;i` &lt;&gt;`__&lt;Esc&gt;F&lt;&quot;+pF`a&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Paste a ReST-formatted link from system clipboard&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="kr">end</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1">-- (R)Markdown-specific mappings</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_create_autocmd</span><span class="p">(</span><span class="s2">&quot;Filetype&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;markdown&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;rmd&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nv">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;i&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="s2">&quot;&lt;leader&gt;d&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;&lt;Esc&gt;:r! date &quot;+</span><span class="se">\\</span><span class="s1"># </span><span class="se">\\</span><span class="s1">%Y-</span><span class="se">\\</span><span class="s1">%m-</span><span class="se">\\</span><span class="s1">%d&quot;&lt;CR&gt;A&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Insert date as section title&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span>
<span class="w">      </span><span class="s2">&quot;n&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;&lt;leader&gt;p&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;i[]()&lt;Esc&gt;h&quot;+pF]i&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Paste a Markdown-formatted link from system clipboard&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="kr">end</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1">-- Tell nvim about the snakemake filetype</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">filetype</span><span class="p">.</span><span class="nf">add</span><span class="p">({</span>
<span class="w">  </span><span class="nv">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;Snakefile&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;snakemake&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nv">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;*.smk&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;snakemake&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;*.snakefile&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;snakemake&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;*.snakemake&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;snakemake&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;Snakefile*&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;snakemake&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">})</span>

<span class="c1">-- Set commentstring for snakemake, which is needed for vim-commentary</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_create_autocmd</span><span class="p">(</span><span class="s2">&quot;FileType&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;snakemake&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;set commentstring=#</span><span class="se">\\</span><span class="s2"> %s&quot;</span><span class="p">)</span><span class="w"> </span><span class="kr">end</span><span class="p">,</span>
<span class="p">})</span>


<span class="c1">-- Render RMarkdown in R running in terminal with &lt;leader&gt;k</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_create_autocmd</span><span class="p">(</span><span class="s2">&quot;FileType&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;rmarkdown&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;rmd&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nv">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span>
<span class="w">      </span><span class="s2">&quot;n&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;&lt;leader&gt;k&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;:TermExec cmd=&#39;rmarkdown::render(</span><span class="se">\&quot;</span><span class="s2">%:p</span><span class="se">\&quot;</span><span class="s2">)&#39;&lt;CR&gt;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Render RMar[k]down to HTML&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span>
<span class="w">      </span><span class="s2">&quot;n&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;&lt;leader&gt;rm&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="kr">function</span><span class="w"> </span><span class="p">()</span>
<span class="w">        </span><span class="nv">ft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">ft</span><span class="p">:</span><span class="nf">get</span><span class="p">()</span>
<span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">ft</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;rmarkdown&quot;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">ft</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;rmd&quot;</span><span class="w"> </span><span class="kr">then</span>
<span class="w">          </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;set ft=markdown&quot;</span><span class="p">)</span>
<span class="w">          </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;RenderMarkdown enable&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kr">end</span>
<span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">ft</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;markdown&quot;</span><span class="w"> </span><span class="kr">then</span>
<span class="w">          </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;set ft=rmarkdown&quot;</span><span class="p">)</span>
<span class="w">          </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;RenderMarkdown disable&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="kr">end</span>
<span class="w">      </span><span class="kr">end</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Toggle render-markdown on an RMarkdown file&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">({</span>
<span class="w">      </span><span class="s2">&quot;n&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;i&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;`&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;Esc&gt;i```{r}&lt;CR&gt;```&lt;Esc&gt;O&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;New fenced RMarkdown code block&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="kr">end</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1">-- Run Python code in IPython running in terminal</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_create_autocmd</span><span class="p">(</span><span class="s2">&quot;FileType&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;k&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:TermExec cmd=&#39;run %:p&#39;&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Run Python file in IPython&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="kr">end</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1">-- Briefly highlight yanked text</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_create_autocmd</span><span class="p">(</span><span class="s2">&quot;TextYankPost&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="py">highlight</span><span class="p">.</span><span class="py">on_yank</span><span class="p">{</span><span class="nv">higroup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;IncSearch&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">timeout</span><span class="o">=</span><span class="mi">100</span><span class="p">}</span>
<span class="w">  </span><span class="kr">end</span><span class="p">,</span>
<span class="w">  </span><span class="nv">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1">-- Modified from https://github.com/nvim-tree/nvim-tree.lua/wiki/Auto-Close.</span>
<span class="c1">-- If the last buffer(s) open are nvim-tree or trouble.nvim or aerial, then close them all and quit.</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_create_autocmd</span><span class="p">(</span><span class="s2">&quot;QuitPre&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">close_wins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">floating_wins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">wins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_list_wins</span><span class="p">()</span>
<span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">w</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">wins</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
<span class="w">      </span><span class="kd">local</span><span class="w"> </span><span class="nv">bufname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_buf_get_name</span><span class="p">(</span><span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_win_get_buf</span><span class="p">(</span><span class="nv">w</span><span class="p">))</span>
<span class="w">      </span><span class="kr">if</span><span class="w"> </span><span class="nv">bufname</span><span class="p">:</span><span class="nf">match</span><span class="p">(</span><span class="s2">&quot;NvimTree_&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span><span class="w">  </span><span class="c1">-- nvim-tree buffer</span>
<span class="w">        </span><span class="nb">table.insert</span><span class="p">(</span><span class="nv">close_wins</span><span class="p">,</span><span class="w"> </span><span class="nv">w</span><span class="p">)</span>
<span class="w">      </span><span class="kr">end</span>
<span class="w">      </span><span class="kr">if</span><span class="w"> </span><span class="nv">bufname</span><span class="p">:</span><span class="nf">match</span><span class="p">(</span><span class="s2">&quot;Trouble&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span><span class="w">    </span><span class="c1">-- trouble.nvim buffer</span>
<span class="w">        </span><span class="nb">table.insert</span><span class="p">(</span><span class="nv">close_wins</span><span class="p">,</span><span class="w"> </span><span class="nv">w</span><span class="p">)</span>
<span class="w">      </span><span class="kr">end</span>
<span class="w">      </span><span class="kr">if</span><span class="w"> </span><span class="nv">bufname</span><span class="p">:</span><span class="nf">match</span><span class="p">(</span><span class="s2">&quot;Scratch&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span><span class="w">    </span><span class="c1">-- aerial buffer</span>
<span class="w">        </span><span class="nb">table.insert</span><span class="p">(</span><span class="nv">close_wins</span><span class="p">,</span><span class="w"> </span><span class="nv">w</span><span class="p">)</span>
<span class="w">      </span><span class="kr">end</span>
<span class="w">      </span><span class="kr">if</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_win_get_config</span><span class="p">(</span><span class="nv">w</span><span class="p">).</span><span class="nv">relative</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="c1">-- floating windows</span>
<span class="w">        </span><span class="nb">table.insert</span><span class="p">(</span><span class="nv">floating_wins</span><span class="p">,</span><span class="w"> </span><span class="nv">w</span><span class="p">)</span>
<span class="w">      </span><span class="kr">end</span>
<span class="w">    </span><span class="kr">end</span>

<span class="w">    </span><span class="c1">-- If the buffer we are closing during this QuitPre action is the only one</span>
<span class="w">    </span><span class="c1">-- that does not match the above patterns, then consider it the last text buffer,</span>
<span class="w">    </span><span class="c1">-- and close all other buffers.</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">#</span><span class="nv">wins</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">#</span><span class="nv">floating_wins</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">#</span><span class="nv">close_wins</span><span class="w"> </span><span class="kr">then</span>
<span class="w">      </span><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">w</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">close_wins</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
<span class="w">        </span><span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_win_close</span><span class="p">(</span><span class="nv">w</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">      </span><span class="kr">end</span>
<span class="w">    </span><span class="kr">end</span>
<span class="w">  </span><span class="kr">end</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
</div></details><details><summary>lua/config/keymaps.lua</summary><div class="details"><p><code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/config/keymaps.lua</span></code> configures keymappings that are
not otherwise configured in the individual plugin configs.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Keymappings.</span>
<span class="c1">-- These are general keymappings. For keymappings related to plugins, see</span>
<span class="c1">-- lua/plugins/*.lua. Many keymappings will have descriptions which will show</span>
<span class="c1">-- up in which-key.</span>
<span class="c1">--</span>
<span class="c1">-- In general, see the `desc` fields for the keymap description.</span>


<span class="c1">-- Set up labeled groupings in which-key</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">wk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s1">&#39;which-key&#39;</span><span class="p">)</span>
<span class="nv">wk</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;leader&gt;c&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;+code&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">)</span>
<span class="nv">wk</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;leader&gt;f&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;+file or +find&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">)</span>
<span class="nv">wk</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;leader&gt;o&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;+obsidian&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">)</span>

<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;Esc&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;C-</span><span class="se">\\</span><span class="s2">&gt;&lt;C-n&gt;&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- Fix &lt;Esc&gt; in terminal buffer</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;Leader&gt;H&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:set hlsearch!&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Toggle search highlight&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;W&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:%s/</span><span class="se">\\</span><span class="s2">s</span><span class="se">\\</span><span class="s2">+$//&lt;cr&gt;:let @/=&#39;&#39;&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Clean trailing whitespace&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">({</span><span class="w"> </span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;i&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;R&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;Esc&gt;:syntax sync fromstart&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Refresh syntax highlighting&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;i&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="s2">&quot;&lt;leader&gt;ts&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;&lt;Esc&gt;o&lt;Esc&gt;:r! date &quot;+</span><span class="se">\\</span><span class="s1">%Y-</span><span class="se">\\</span><span class="s1">%m-</span><span class="se">\\</span><span class="s1">%d </span><span class="se">\\</span><span class="s1">%H:</span><span class="se">\\</span><span class="s1">%M &quot;&lt;CR&gt;A&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Insert timestamp&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">)</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;80A-&lt;Esc&gt;d80&lt;bar&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Fill rest of line with -&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;&lt;tab&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:set nowrap tabstop=&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Prepare for viewing TSV&quot;</span><span class="w"> </span><span class="p">})</span>

<span class="c1">-- Buffer navigation keymappings</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:bfirst&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;First buffer&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:blast&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Last buffer&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;[b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:bprevious&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Previous buffer&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;]b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:bnext&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Next buffer&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;H&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:bprevious&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Previous buffer&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;L&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;:bnext&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Next buffer&quot;</span><span class="w"> </span><span class="p">})</span>

<span class="c1">-- In preparation for copying, turn off various symbols and text that shouldn&#39;t</span>
<span class="c1">-- be copied, such as indent-blankline vertical lines, indicators of git</span>
<span class="c1">-- changes, and various virtual text and symbols. Also toggle line numbers.</span>
<span class="c1">--</span>
<span class="c1">-- In all cases, only disable things if the plugin is loaded in the first</span>
<span class="c1">-- place.</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;cp&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nb">package.loaded</span><span class="p">[</span><span class="s2">&quot;ibl&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">      </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;IBLToggle&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kr">end</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nb">package.loaded</span><span class="p">[</span><span class="s2">&quot;gitsigns&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">      </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;Gitsigns toggle_signs&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kr">end</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nb">package.loaded</span><span class="p">[</span><span class="s2">&quot;render-markdown&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">      </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;:RenderMarkdown toggle&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kr">end</span>
<span class="w">    </span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;set nu!&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="kr">end</span><span class="p">,</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Prepare for copying text to another program&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1">-- Keymappings for navigating terminals.</span>
<span class="c1">-- &lt;leader&gt;q and &lt;leader&gt;w move to left and right windows respectively. Useful</span>
<span class="c1">-- when working with a terminal, or to aerial panels or nvim-tree panels. Works</span>
<span class="c1">-- even in insert mode; to enter a literal &#39;,w&#39; type more slowly after the</span>
<span class="c1">-- leader.</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">({</span><span class="w"> </span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;i&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;w&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;Esc&gt;:wincmd l&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Move to right window&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">({</span><span class="w"> </span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;i&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;q&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;Esc&gt;:wincmd h&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Move to left window&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">keymap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;leader&gt;q&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;C-</span><span class="se">\\</span><span class="s2">&gt;&lt;C-n&gt;:wincmd h&lt;CR&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Move to left window&quot;</span><span class="w"> </span><span class="p">})</span>

<span class="c1">-- Registers</span>
<span class="nv">vim</span><span class="p">.</span><span class="py">fn</span><span class="p">.</span><span class="nf">setreg</span><span class="p">(</span><span class="s2">&quot;l&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;I&#39;A&#39;,j&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- &quot;listify&quot;: wrap with quotes and add trailing comma</span>
</pre></div>
</div>
</div></details><details><summary>lua/plugins/</summary><div class="details"><p>Each plugin is described in more detail below in its own section. Each has
its own file in the <code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/plugins</span></code> directory.</p>
</div></details></section>
<section id="leader-key">
<h2>Leader key<a class="headerlink" href="#leader-key" title="Link to this heading">¶</a></h2>
<p>The leader key is remapped to <kbd class="kbd docutils literal notranslate">,</kbd>. This is configured in <code class="file docutils literal notranslate"><span class="pre">.config/nvim/init.lua</span></code>.</p>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>command</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">,</kbd></p></td>
<td><p>Remapped leader. Below, when you see <kbd class="kbd docutils literal notranslate">&lt;leader&gt;</kbd> it means <kbd class="kbd docutils literal notranslate">,</kbd>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="opening-multiple-files">
<span id="buffers"></span><h2>Opening multiple files<a class="headerlink" href="#opening-multiple-files" title="Link to this heading">¶</a></h2>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>command</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">:e</kbd> &lt;filename&gt;</p></td>
<td><p>Open filename in new buffer</p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;ff</kbd></p></td>
<td><p>Search for file in directory to open in new buffer (Telescope)</p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;fb</kbd></p></td>
<td><p>Toggle file browser, hit Enter on file (see <span class="xref std std-ref">neotree</span> for more)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="switching-between-open-files">
<h2>Switching between open files<a class="headerlink" href="#switching-between-open-files" title="Link to this heading">¶</a></h2>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>command</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>configured in</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">[b</kbd>, <kbd class="kbd docutils literal notranslate">]b</kbd></p></td>
<td><p>Prev and next buffers</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">H</kbd>, <kbd class="kbd docutils literal notranslate">L</kbd></p></td>
<td><p>Prev buffer, next buffer</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;1</kbd>, <kbd class="kbd docutils literal notranslate">&lt;leader&gt;2</kbd></p></td>
<td><p>First buffer, last buffer</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;b</kbd> then type highlighted letter in tab</p></td>
<td><p>Switch buffer</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/plugins/bufferline.lua</span></code></p></td>
</tr>
</tbody>
</table>
<details><summary>Don't like this?</summary><div class="details"><p>See the config for the <span class="xref std std-ref">bufferline</span> plugin to change; the bufferline is
additionally styled using the <span class="xref std std-ref">zenburn</span> plugin/colorscheme.</p>
</div></details><details><summary>Screencast of switching buffers</summary><div class="details"><p>This example uses an older version of the bufferline plugin and so the
styling is a little different, but the shortcuts demonstrated are the same.</p>
<img alt="_images/buffers_annotated.gif" src="_images/buffers_annotated.gif" />
</div></details></section>
<section id="shortcuts">
<h2>Shortcuts<a class="headerlink" href="#shortcuts" title="Link to this heading">¶</a></h2>
<p>Here are the shortcuts configured in the main config. See <a class="reference internal" href="nvim-plugins.html#plugins"><span class="std std-ref">Nvim plugins</span></a> for
all the plugin-specific shortcuts.</p>
<p>You can browse around to see if there’s anything you think might be useful, but
there’s no need for you to know all these! I happen to use them, and since I’ve
included them in this config you get them for free.</p>
<p>The <span class="xref std std-ref">whichkey</span> plugin will pop up a window showing what keys you can
press, so you can use that for exploration as well.</p>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>command</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>configured in</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;H</kbd></p></td>
<td><p>Toggle highlighted search. Sometimes it’s distracting to have all the
highlights stick around.</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;W</kbd></p></td>
<td><p>Remove all trailing spaces in the file. Useful when cleaning up code to
commit.</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;R</kbd></p></td>
<td><p>Refresh syntax highlighting. Useful when syntax highlighting gets wonky.</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">&#64;l</kbd></p></td>
<td><p>Macro to surround the line with quotes and add a trailing comma. Useful
for making Python or R lists out of pasted text</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;-</kbd></p></td>
<td><p>Fills in the rest of the line with “-”, out to column 80. Useful for
making section separators.</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;&lt;TAB&gt;</kbd></p></td>
<td><p>Useful for working with TSVs. Starts the command <code class="docutils literal notranslate"><span class="pre">:set</span> <span class="pre">nowrap</span>
<span class="pre">tabstop=</span></code> but then leaves the cursor at the vim command bar so you can
fill in a reasonble tabstop for the file you’re looking at.</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;`</kbd></p></td>
<td><p>(that’s a backtick) Adds a new RMarkdown chunk and places the cursor
inside it</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/autocmds.lua</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;d</kbd></p></td>
<td><p>Insert the current date as a ReST or Markdown-formatted title,
depending on the file type. Useful when writing logs.</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/autocmds.lua</span></code></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;p</kbd></p></td>
<td><p>Paste the contents of the OS clipboard into a formatted link as
appropriate for the file type (ReST and Markdown currently supported)
and puts the cursor in the link description. Note that this will <em>not</em>
work to paste to vim on a remote server, unless you do tricky things
with X forwarding, so consider it local-only.</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/autocmds.lua</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;cp</kbd></p></td>
<td><p>Toggle a sort of “copy mode”. Turns off line numbers, the vertical
indentation lines from indent-blankline, any sign columns, and
render-markdown (if enabled) so you can more easily copy text into
another app.</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">&lt;leader&gt;ts</kbd></p></td>
<td><p>Insert a timestamp of the form <code class="docutils literal notranslate"><span class="pre">YYYY-MM-DD</span> <span class="pre">HH:MM</span></code></p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">lua/config/keymaps.lua</span></code></p></td>
</tr>
</tbody>
</table>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2024-01-21: </span>Added <kbd class="kbd docutils literal notranslate">&lt;leader&gt;p</kbd> for pasting formatted Markdown/ReST links</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2024-03-31: </span>Added <kbd class="kbd docutils literal notranslate">&lt;leader&gt;cp</kbd> for a convenient “copy mode”</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2024-09-01: </span><kbd class="kbd docutils literal notranslate">&lt;leader&gt;cp</kbd> is more complete (toggles render-markdown and sign columns, too)</p>
</div>
</section>
<section id="other-behaviors">
<h2>Other behaviors<a class="headerlink" href="#other-behaviors" title="Link to this heading">¶</a></h2>
<p>Here are some other behaviors that are configured in <code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/config/options.lua</span></code>; expand for details.</p>
<details><summary>Non-printing characters</summary><div class="details"><p>&lt;TAB&gt; characters look like <code class="docutils literal notranslate"><span class="pre">&gt;••••</span></code>. Trailing spaces show up as dots like
<code class="docutils literal notranslate"><span class="pre">∙∙∙∙∙</span></code>. Differentiating between tabs and spaces is extremely helpful in
tricky debugging situations.</p>
<p><code class="file docutils literal notranslate"><span class="pre">~/.config/nvim/lua/config/autocmds.lua</span></code> has these lines:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;:autocmd InsertEnter * set listchars=tab:&gt;•&quot;</span><span class="p">)</span>
<span class="nv">vim</span><span class="p">.</span><span class="nf">cmd</span><span class="p">(</span><span class="s2">&quot;:autocmd InsertLeave * set listchars=tab:&gt;•,trail:∙,nbsp:•,extends:⟩,precedes:⟨&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The autocmds here mean that we only show the trailing spaces when we’re outside
of insert mode, so that every space typed doesn’t show up as trailing. When
wrap is off, the characters for “extends” and “precedes” indicate that there’s
text offscreen.</p>
</div></details><details><summary>Formatting text</summary><div class="details"><p>The following options change the behavior of various formatting; see <code class="docutils literal notranslate"><span class="pre">:h</span> <span class="pre">formatoptions</span></code>:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="nv">vim</span><span class="p">.</span><span class="py">opt</span><span class="p">.</span><span class="py">formatoptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;qrn1coj&quot;</span>
</pre></div>
</div>
<p>Explanation of these options:</p>
<ul class="simple">
<li><p>q: gq also formats comments</p></li>
<li><p>r: insert comment leader after &lt;Enter&gt; in insert mode</p></li>
<li><p>n: recognize numbered lists</p></li>
<li><p>1: don’t break a line after a 1-letter word</p></li>
<li><p>c: autoformat comments</p></li>
<li><p>o: automatically insert comment leader afer ‘o’ or ‘O’ in Normal mode.</p></li>
<li><p>Use Ctrl-u to quickly delete it if you didn’t want it.</p></li>
<li><p>j: where it makes sense, remove a comment leader when joining lines</p></li>
</ul>
</div></details><details><summary>Spell check</summary><div class="details"><p>In case you’re not aware, vim has built-in spellcheck.</p>
<table class="docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>command</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">:set</span> <span class="pre">spell</span></code></p></td>
<td><p>Enable spell check</p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">]s</kbd></p></td>
<td><p>Next spelling error</p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">[s</kbd></p></td>
<td><p>Previous spelling error</p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">z=</kbd></p></td>
<td><p>Show spelling suggestions</p></td>
</tr>
</tbody>
</table>
</div></details><details><summary>Line coloring and cursor</summary><div class="details"><p>See <code class="file docutils literal notranslate"><span class="pre">.config/nvim/lua/config/options.lua</span></code> for the <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">cul</span></code> and <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">nocul</span></code> options and set to your liking</p>
</div></details></section>
<section id="plugin-documentation">
<h2>Plugin documentation<a class="headerlink" href="#plugin-documentation" title="Link to this heading">¶</a></h2>
<p>See the separate section <a class="reference internal" href="nvim-plugins.html#plugins"><span class="std std-ref">Nvim plugins</span></a> for documentation.</p>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="bash.html" title="Previous document">Bash dotfiles</a>
        </li>
        <li>
          <a href="nvim-plugins.html" title="Next document">Nvim plugins</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">dotfiles</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="starthere.html">Start here</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Additional tool installations</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash.html">Bash dotfiles</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Vim (neovim) configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#config-file-location">Config file location</a></li>
<li class="toctree-l2"><a class="reference internal" href="#leader-key">Leader key</a></li>
<li class="toctree-l2"><a class="reference internal" href="#opening-multiple-files">Opening multiple files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#switching-between-open-files">Switching between open files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shortcuts">Shortcuts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-behaviors">Other behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plugin-documentation">Plugin documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nvim-plugins.html">Nvim plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmux.html">tmux configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">conda</a></li>
<li class="toctree-l1"><a class="reference internal" href="post.html">Post-setup tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="nvim-lua.html">Migrating to Neovim Lua config</a></li>
<li class="toctree-l1"><a class="reference internal" href="why.html">Why?</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="bash.html" title="previous chapter">Bash dotfiles</a></li>
      <li>Next: <a href="nvim-plugins.html" title="next chapter">Nvim plugins</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div><script>
    let closest;
    // Get the last part of the URL after the # symbol - should match the div id to display
    let id = window.location.hash.substring(1);
    let elem = document.getElementById(id);
    if (elem != null) {
        // Get the closest "details" element and open it
        closest = elem.closest("details");
        closest.open = true;
    }
</script>
  </body>
</html>